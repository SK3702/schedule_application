<div class = "main">
    <div class= "container">
        <div class="main_header">
            <h2>予定一覧</h2>
            <%= button_to '新規投稿', {controller: 'posts', action: 'new'}, {method: :get, class: "new_btn btn"} %>
        </div>

        <% if flash[:notice_new_success] %>
            <p class="notice_success"><%= flash[:notice_new_success] %></p>
        <% end %>

        <% if flash[:notice_edit_success] %>
            <p class="notice_success"><%= flash[:notice_edit_success] %></p>
        <% end %>


        <table class="main_table">
            <thead>
                <tr>
                <th>ID</th>
                <th>タイトル</th>
                <th>開始日</th>
                <th>終了日</th>
                <th>終日</th>
                <th>更新日</th>
                <th></th>
                <th></th>
                <th></th>
                </tr>
            </thead>

            <tbody>
                <% @posts.each do |post| %>
                    <tr>
                        <td><%= post.id %></td>
                        <td><%= post.title %></td>
                        <td><%= post.start_date.to_s(:date_jp) %></td>
                        <td><%= post.end_date.to_s(:date_jp) %></td>
                        
                        <% if post.all_day %>
                            <td>◯</td>
                        <% else %>
                            <td></td>
                        <% end %>
                        
                        <td><%= post.updated_at.to_s(:datetime_jp) %></td>
                        <td><%= link_to "詳細", post_path(post) %></td>
                        <td><%= link_to "編集", edit_post_path(post) %></td>
                        <td><%= link_to "削除", post_path(post), method: :delete, data: { confirm: "本当に削除しますか？" } %></td>
                    </tr>
                <%end%>
            </tbody>
        </table>



        <div class="main_footer">
            <p>予定の合計数: <%= @posts.count%></p>
            <p>本日の日付: <%= Time.zone.today.to_s(:date_jp) %></p>

        </div>

    </div>
</div>
